@{
    ViewData["Title"] = "Football Predictions";
}

<h1>Football Predictions</h1>

<form id="predictionForm">
    <div>
        <label for="homeTeam">Home Team:</label>
        <input type="text" id="homeTeam" name="homeTeam" required />
    </div>
    <div>
        <label for="awayTeam">Away Team:</label>
        <input type="text" id="awayTeam" name="awayTeam" required />
    </div>
    <button type="submit">Predict</button>
</form>

<!-- Pole do wyświetlania wyniku predykcji -->
<div id="predictionResult" style="margin-top: 20px; font-weight: bold;">
    <h3>Prediction Result:</h3>
    <p id="resultText" style="color: blue;"></p>
</div>

@section Scripts {
    <script>
        document.getElementById('predictionForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Zapobiegaj domyślnej wysyłce formularza

            const homeTeam = document.getElementById('homeTeam').value;
            const awayTeam = document.getElementById('awayTeam').value;

            fetch('/Home/Predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ homeTeam: homeTeam, awayTeam: awayTeam })
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log("Server response:", data.result); // Debugowanie - wyświetla wynik w konsoli

                    const resultText = document.getElementById('resultText');
                    if (data.result.startsWith("Error:")) {
                        resultText.textContent = data.result;
                        resultText.style.color = "red";
                    } else if (data.result.trim() === "1") {
                        resultText.textContent = "Prediction: Home Team Wins!";
                        resultText.style.color = "green";
                    } else if (data.result.trim() === "0") {
                        resultText.textContent = "Prediction: Draw!";
                        resultText.style.color = "orange";
                    } else if (data.result.trim() === "-1") {
                        resultText.textContent = "Prediction: Away Team Wins!";
                        resultText.style.color = "red";
                    } else {
                        resultText.textContent = `Unexpected error: ${data.result}`;
                        resultText.style.color = "red";
                    }
                })

                .catch(error => {
                    console.error('Error:', error);
                    const resultText = document.getElementById('resultText');
                    resultText.textContent = "Error: Could not predict the result.";
                    resultText.style.color = "red";
                });
        });
    </script>
}